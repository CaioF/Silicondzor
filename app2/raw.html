<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Oily</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="./images/logo-s.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta
      name="description"
      content="Oily is a machine-learning powered platform for business managers in order to improve the rentability of oil mining"
    />

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">

    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/well-int.css">
    <!--============================================================-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(getData);
      function getData() {
        jQuery.ajax({
            url: "/well-data",
            type: "GET",
            dataType: "json",
            async: false,
            success: function (data) {
                console.log(data);
                drawChart(data);
            }
        });
      };

      function drawChart(data) {
        var data = google.visualization.arrayToDataTable([
       ['Well ID',  '500-1000', '1000-1500', '1500-2000', '2000-2500', '2500-3000'],
       ['47', 0, 0, 0, 19035, 44885],
       ['95', 0, 0, 0, 0, 113905],
       ['126', 90216, 715680, 713916, 584136, 117810],
       ['164', 133332, 941032, 943492, 645176, 0],
       ['176', 0, 0, 0, 206624, 0]
               ]);

        var options_fullStacked = {
          isStacked: 'true',
          height: 350,
          width: 800,
          legend: {position: 'top', maxLines: 3},
          vAxis: {
            minValue: 0,
          }
        };

        var chart = new google.visualization.SteppedAreaChart(document.getElementById('chart_div'));

        chart.draw(data, options_fullStacked);
      }
    </script>
    <!--============================================================-->
  </head>
  <body>

	  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container-fluid px-md-4	">
	      <a class="navbar-brand" href="index.html">Oily</a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item active"><a href="index.html" class="nav-link">Home</a></li>
	          <li class="nav-item"><a href="wells.html" class="nav-link">Well Manager</a></li>
	          <li class="nav-item"><a href="analysis.html" class="nav-link">Economical Analysis</a></li>
	        </ul>
	      </div>
	    </div>
	  </nav>
    <!-- END nav -->

    <div class="hero-wrap hero-wrap-2" style="background-image: url('images/bg_2.jpg');" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text align-items-end justify-content-start">
          <div class="col-md-12 ftco-animate text-center mb-5">
          	<p class="breadcrumbs mb-0"><span class="mr-3"><a href="index.html">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Wells</span></p>
            <h1 class="mb-3 bread">Well Manager</h1>
          </div>
        </div>
      </div>
    </div>

    <div class="layout">

	<!-- Main section -->
	<section class="content">


		<!-- Main Content --->
		<section class="main">

			<!-- App Header Content --->
			<header class="app-header">
				<h1 class="title"> Oily Manager Dashboard </h1>
				<nav class="app-nav">
					<ul class="menu">
						<li> <a href="/wells.html"> Reservoir Overview </a> </li>
						<li> <a href="/financial.html"> Financial Overview </a> </li>
						<li class="selected"> <a> Raw Predictions </a> </li>
					</ul>
				</nav>
			</header>

			<!-- App Main Content --->
			<div class="app-content">
        <table class="table" id="js-datatable">
          <thead>
             <tr>
               <th>Well id</th>
               <th>Expenses</th>
               <th>Mass</th>
               <th>Oil</th>
               <th>Price</th>
               <th>Square</th>
               <th>Total</th>
               <th>Value</th>
             </tr>
          </thead>
          <tbody>
            <tr>
              <td>47</td>
              <td>3175600</td>
              <td>897229400</td>
              <td>323</td>
              <td>3723502010000</td>
              <td>32300</td>
              <td>1360</td>
              <td>8066333400</td>
            </tr>
            <tr>
              <td class="heatmap-stable">95</td>
              <td>2799550</td>
              <td>248540000</td>
              <td>170</td>
              <td>1031441000000</td>
              <td>17000</td>
              <td>1199</td>
              <td>4244310450</td>
            </tr>
            <tr>
              <td class="heatmap-positive">126</td>
              <td>41169250</td>
              <td>65369021400</td>
              <td>2757</td>
              <td>271281438810000</td>
              <td>275700</td>
              <td>17633</td>
              <td>68836961750</td>
            </tr>
            <tr>
              <td class="heatmap-negative">164</td>
              <td>36182310</td>
              <td>87404758400</td>
              <td>3188</td>
              <td>362729747360000</td>
              <td>318800</td>
              <td>16238</td>
              <td>79609621690</td>
            </tr>
            <tr>
              <td class="heatmap-negative">176</td>
              <td>2741290</td>
              <td>372070400</td>
              <td>208</td>
              <td>1544092160000</td>
              <td>20800  </td>
              <td>1174</td>
              <td>5193722710</td>
            </tr>
          </tbody>
        </table>
			</div>

		</section>
		<!-- End Main content --->

	</section>

</div>



  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

  <script type="text/javascript">
    function clean_formatted_data(str) {
      return parseFloat(str.replace(/([%,$,\,])+/g,''));
    }

    function col_to_array(tbl_col,target) {
      // Returns column n (zero indexed) in table id target as an array

      var colArray = $('#'+target+' td:nth-child('+tbl_col+')').map(function(){
        return clean_formatted_data( $(this).text() );
      }).get();

      return colArray;
    }

    //------ new schtuff ------------------------//

    function get_pos_of_max(col_data) { return $.inArray( Math.max.apply(Math,col_data), col_data ) }

    function generate_opacities(col_data, max) {
      var opacity_array = [];
      var increment = max/(col_data.length);

      for(i=col_data.length; i >= 1; i--) {
        opacity_array.push(i*increment/100);
      }

      return opacity_array;
    }


    function process_col_best_performing(tbl_col, target) {
      var col_data = col_to_array(tbl_col,target);
      var opacity_array = generate_opacities(col_data, 50);
      var row_count = col_data.length;

      for (var i=1; i <= row_count; i++) {
        $('#'+target+' tr:nth-child('+(get_pos_of_max(col_data)+1)+') td:nth-child('+tbl_col+')').css('background','rgba(0,0,255,'+opacity_array[0]+')');
        col_data[get_pos_of_max(col_data)] = null;
        opacity_array.splice(0,1);

      }
    }

    process_col_best_performing(2,'js-datatable');
    process_col_best_performing(3,'js-datatable');
    process_col_best_performing(4,'js-datatable');
    process_col_best_performing(5,'js-datatable');
    process_col_best_performing(6,'js-datatable');
    process_col_best_performing(7,'js-datatable');
    process_col_best_performing(8,'js-datatable');
  </script>
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>

  </body>
</html>
